
  <style>
    body {
      font-family: 'Inter', sans-serif;
    }
  </style>
<body class="bg-black text-green-400">
<div class="min-h-screen bg-black text-green-400 p-6 sm:p-10">
  <div class="max-w-7xl mx-auto">
    <!-- Dashboard Title -->
    <h1 class="text-4xl sm:text-5xl font-extrabold text-green-400 mb-8 text-center sm:text-left">
      ğŸ‘¤ Admin Dashboard
    </h1>

    <p class="text-center sm:text-left text-green-300 text-sm mb-10">
      Welcome, <%= current_user.email %>! You are logged in as an <%= current_user.role.capitalize %>.
    </p>

    <!-- Stats Cards -->
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8 mb-14">
      <% stats = {
        "Total Users" => User.count,
        "New This Week" => User.where('created_at >= ?', 7.days.ago).count,
        "Admins" => User.where(role: 'admin').count
      } %>

      <% stats.each do |title, value| %>
        <div
          class="bg-gray-900 shadow-lg rounded-xl p-6 text-center transition-shadow duration-300 hover:shadow-green-500/50"
          role="region" aria-label="<%= title %>">
          <p class="text-sm uppercase text-green-300 mb-3 tracking-wide font-semibold">
            <%= title %>
          </p>
          <p class="text-5xl font-extrabold leading-none text-green-100">
            <%= value %>
          </p>
        </div>
      <% end %>
    </div>

    <!-- Recently Created Users Table -->
    <section class="mb-14">
      <h2 class="text-3xl font-semibold text-green-400 mb-6 flex items-center gap-2">
        <span>ğŸ†• Recently Created Users</span>
      </h2>

      <div class="overflow-x-auto rounded-xl shadow-lg bg-gray-900">
        <table class="min-w-full text-sm divide-y divide-green-800">
          <thead class="bg-green-900 text-green-100 uppercase tracking-wide">
            <tr>
              <th class="px-6 py-3 text-left">Email</th>
              <th class="px-6 py-3 text-left">Role</th>
              <th class="px-6 py-3 text-left">Joined</th>
            </tr>
          </thead>
          <tbody>
            <% User.order(created_at: :desc).limit(5).each do |user| %>
              <tr class="border-b border-green-800 hover:bg-green-900 transition">
                <td class="px-6 py-3 text-green-300 break-words max-w-xs sm:max-w-full"><%= user.email %></td>
                <td class="px-6 py-3 capitalize text-green-200 font-medium"><%= user.role %></td>
                <td class="px-6 py-3 text-green-400 whitespace-nowrap">
                  <%= user.created_at.strftime("%b %d, %Y") %>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
    </section>

    <!-- User Management Section -->
    <section>
      <h2 class="text-3xl font-semibold text-green-400 mb-8 flex items-center gap-2">
        âš™ï¸ Manage All Users
      </h2>

      <div class="space-y-8">
        <% @users.each do |user| %>
          <%= form_for(user, url: admin_path(user), remote: true, method: :patch,
            html: { class: "bg-gray-900 border border-green-800 rounded-xl p-6 shadow-md transition hover:shadow-green-600/50" }) do |f| %>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 items-center">
              <p class="text-green-300 font-semibold break-words max-w-full md:max-w-none">
                Email: <span class="text-green-100 font-medium"><%= user.email %></span>
              </p>

              <div>
                <%= f.label :role, "Change Role", class: "block text-sm text-green-300 mb-1" %>
                <%= f.select :role, options_for_select(['admin', 'standard'], user.role), {}, class: "w-full p-2 rounded bg-gray-800 text-green-100 border border-green-700 focus:outline-none focus:ring-2 focus:ring-green-400 focus:border-green-400 transition" %>
              </div>

              <div class="pt-4 md:pt-0">
                <%= f.submit "Update User", class: "w-full md:w-auto bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-6 rounded transition focus:outline-none focus:ring-4 focus:ring-green-500" %>
              </div>
            </div>

          <% end %>
        <% end %>
      </div>
    </section>
  </div>
</div>
</div>